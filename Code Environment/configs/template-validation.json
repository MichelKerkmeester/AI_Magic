{
  "$schema": "https://speckit.dev/schemas/template-validation-config.json",
  "version": "1.0",
  "description": "SpecKit template validation configuration - customize enforcement rules and detection thresholds",

  "validation": {
    "template_bypass": {
      "enabled": true,
      "severity": "error",
      "require_marker": true,
      "description": "Detect if files were manually created instead of copied from templates"
    },
    "section_completeness": {
      "enabled": true,
      "severity": "error",
      "description": "Verify all required sections are present",
      "required_sections": {
        "spec_template": [
          "OBJECTIVE",
          "SCOPE",
          "USERS & STORIES",
          "SUCCESS CRITERIA"
        ],
        "plan_template": [
          "OBJECTIVE",
          "QUALITY GATES",
          "TECHNICAL APPROACH",
          "IMPLEMENTATION PHASES"
        ],
        "tasks_template": [
          "OVERVIEW",
          "FOUNDATION PHASE",
          "TASK BREAKDOWN"
        ],
        "research_template": [
          "OBJECTIVE",
          "CONTEXT",
          "RESEARCH QUESTIONS",
          "FINDINGS"
        ],
        "research_spike_template": [
          "OBJECTIVE",
          "HYPOTHESIS",
          "EXPERIMENT",
          "RESULTS"
        ],
        "decision_record_template": [
          "CONTEXT",
          "DECISION",
          "ALTERNATIVES",
          "CONSEQUENCES"
        ],
        "checklist_template": [
          "PURPOSE",
          "CHECKLIST ITEMS"
        ],
        "skill_template": [
          "WHEN TO USE",
          "HOW IT WORKS",
          "RULES"
        ]
      }
    },
    "structure_preservation": {
      "enabled": true,
      "severity": "warning",
      "check_heading_hierarchy": true,
      "check_duplicate_headers": true,
      "description": "Validate markdown heading hierarchy and structure"
    },
    "metadata_validation": {
      "enabled": true,
      "severity": "warning",
      "description": "Validate metadata fields are filled correctly",
      "required_fields": [
        "Category",
        "Tags",
        "Priority",
        "Created",
        "Status"
      ],
      "validate_formats": true,
      "valid_priorities": ["P0", "P1", "P2", "P3"],
      "valid_statuses": ["Draft", "In Progress", "Complete", "Archived"],
      "date_format": "YYYY-MM-DD"
    },
    "user_story_independence": {
      "enabled": true,
      "severity": "warning",
      "require_independent_test": true,
      "check_dependency_language": true,
      "description": "Verify user stories can be tested independently"
    },
    "traceability": {
      "enabled": true,
      "severity": "warning",
      "check_spec_plan_alignment": true,
      "check_tasks_alignment": true,
      "description": "Check spec→plan→tasks alignment"
    },
    "content_adaptation": {
      "enabled": true,
      "severity": "error",
      "description": "Detect remaining placeholder text",
      "block_placeholders": [
        "[NEEDS CLARIFICATION:",
        "[YOUR_VALUE_HERE:"
      ],
      "warn_placeholders": [
        "[OPTIONAL:",
        "[FORMAT:"
      ],
      "max_placeholder_threshold": 3
    },
    "emoji_validation": {
      "enabled": true,
      "severity": "suggestion",
      "description": "Check H2 headers for decorative emojis",
      "allowed_emojis": ["✅", "❌", "⚠️"],
      "check_headers": true
    },
    "heading_hierarchy": {
      "enabled": true,
      "severity": "warning",
      "allow_skipped_levels": false,
      "description": "Verify no heading levels are skipped (H2→H4)"
    }
  },

  "complexity_detection": {
    "research_spike_template": {
      "enabled": true,
      "description": "Detect investigation/POC work",
      "keywords": [
        "investigate",
        "proof of concept",
        "poc",
        "feasibility",
        "viability",
        "experiment",
        "test approach",
        "validate assumption",
        "time-box"
      ],
      "intent_patterns": [
        "not sure (if|how|whether)",
        "need to (check|verify|test)",
        "quick (test|check|proof)"
      ],
      "score_thresholds": {
        "recommended": 3,
        "suggested": 2
      },
      "complexity_boost_threshold": 6
    },
    "research_template": {
      "enabled": true,
      "description": "Detect exploration/comparison work",
      "keywords": [
        "research",
        "explore",
        "compare options",
        "evaluate",
        "analysis",
        "survey",
        "landscape",
        "alternatives"
      ],
      "intent_patterns": [
        "what (are|is) the (options|choices)",
        "which (library|framework|approach)",
        "best (way|practice|solution)",
        "comprehensive (review|study)"
      ],
      "score_thresholds": {
        "recommended": 4,
        "suggested": 3
      },
      "complexity_boost_threshold": 5,
      "domain_count_threshold": 3
    },
    "decision_record": {
      "enabled": true,
      "description": "Detect architectural/technical decisions",
      "keywords": [
        "architecture decision",
        "adr",
        "technical decision",
        "design choice",
        "trade-off",
        "compare approaches",
        "which library",
        "which framework"
      ],
      "intent_patterns": [
        "(should we|do we) (use|choose)",
        "pros and cons",
        "vs\\.",
        "comparison"
      ],
      "score_thresholds": {
        "recommended": 5,
        "suggested": 4
      },
      "complexity_boost_threshold": 7
    }
  },

  "performance": {
    "cache_enabled": true,
    "parallel_validation": false,
    "timeout_ms": 150,
    "description": "Performance optimization settings"
  },

  "legacy_mode": {
    "enabled": false,
    "skip_validation_for_old_specs": true,
    "cutoff_date": "2025-01-01",
    "description": "Backward compatibility for specs created before enforcement system"
  },

  "output": {
    "verbose": false,
    "show_passed_checks": false,
    "color_output": true,
    "description": "Output formatting preferences"
  },

  "presets": {
    "strict": {
      "description": "Block on all warnings and errors",
      "validation": {
        "template_bypass": {"severity": "error"},
        "metadata_validation": {"severity": "error"},
        "traceability": {"severity": "error"}
      }
    },
    "lenient": {
      "description": "Warn only, never block",
      "validation": {
        "section_completeness": {"severity": "warning"},
        "content_adaptation": {"severity": "warning"}
      }
    },
    "minimal": {
      "description": "Only critical validations",
      "validation": {
        "template_bypass": {"enabled": false},
        "metadata_validation": {"enabled": false},
        "user_story_independence": {"enabled": false},
        "traceability": {"enabled": false},
        "emoji_validation": {"enabled": false},
        "heading_hierarchy": {"enabled": false}
      }
    }
  }
}
